CREATE TABLE Cluster(
    ID SERIAL PRIMARY KEY NOT NULL,
    CountRate INTEGER,
    SummaRate INTEGER
);

CREATE TABLE Person(
    ID SERIAL PRIMARY KEY NOT NULL,
    ClusterID INTEGER,
    FOREIGN KEY (ClusterID) REFERENCES Cluster(ID)
);

CREATE TABLE Song(
    ID Serial PRIMARY KEY not null
);

CREATE TABLE RatePerson(
    PersonID INTEGER NOT NULL ,
    SongID INTEGER NOT NULL ,
    Value SMALLINT CHECK (Value >= 0 AND Value <= 5),
    PRIMARY KEY (PersonID, SongID),
    FOREIGN KEY (PersonID) REFERENCES Person(ID),
    FOREIGN KEY (SongID) REFERENCES Song(ID)
);

CREATE TABLE RateCluster(
    ClusterID INTEGER NOT NULL ,
    SongID INTEGER NOT NULL ,
    Value SMALLINT CHECK (Value >= 0 AND Value <=5),
    PRIMARY KEY (ClusterID, SongID),
    FOREIGN KEY (ClusterID) REFERENCES Cluster(ID),
    FOREIGN KEY (SongID) REFERENCES Song(ID)
);

CREATE TABLE PersonPredicate(
    PersonID INTEGER NOT NULL ,
    Value NUMERIC,
    PRIMARY KEY (PersonID),
    FOREIGN KEY (PersonID) REFERENCES Person(ID)
);

CREATE TABLE SongPredicate(
    SongID INTEGER NOT NULL ,
    ClusterID INTEGER NOT NULL ,
    Value NUMERIC,
    PRIMARY KEY (SongID, ClusterID),
    FOREIGN KEY (SongID) REFERENCES Song(ID),
    FOREIGN KEY (ClusterID) REFERENCES Cluster(ID)
);